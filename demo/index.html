<!doctype html>
<html>
  <head>
    <title>Literally Canvas</title>
    <link href="/lib/css/literallycanvas.css" rel="stylesheet">
    <meta charset="UTF-8">

    <style type="text/css">
      body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        margin: 0;
        background-color: gray;
      }

      .fs-container {
        /* width: 768px; */
        width: 100%;
        margin: auto;
        margin-top: 50px;
      }

      .literally {
        width: 100%;
        height: 100%;
        position: relative;
      }

      .literally img.background, .literally > canvas {
        position: absolute;
      }
    </style>
  </head>

  <body>
    <div class="fs-container">
      <div class="literally one">
        <canvas id="original-canvas"></canvas>
      </div>
      <a href="javascript:void(0);" id="open-image">Open image</a>

      <!--
      <br><br>
      <div class="literally two"></div>
      -->
    </div>

    <script src="/demo/jquery-1.8.2.js"></script>
    <script src="/demo/react-0.10.0.js"></script>
    <script src="/lib/js/literallycanvas.js"></script>

    <script type="text/javascript">
      $(document).ready(function() {
        // disable scrolling on touch devices so we can actually draw
        $(document).bind('touchmove', function(e) {
          if (e.target === document.documentElement) {
            return e.preventDefault();
          }
        });

        LC.setDefaultImageURLPrefix('/lib/img');

        var backgroundImage = new Image();
        backgroundImage.src = '/demo/bear.png';

        var watermarkImage = new Image();
        watermarkImage.src = '/demo/watermark.png';

        // the only LC-specific thing we have to do
        var containerOne = document.getElementsByClassName('literally one')[0];
        var lc = LC.init(containerOne, {
          backgroundShapes: [
            LC.createShape(
              'Image', {image: backgroundImage, x: 100, y: 100})
          ],
          watermarkImage: watermarkImage,
          imageSize: {width: 500, height: 300}
        });
        window.demoLC = lc;
        lc.loadSnapshotJSON(localStorage.getItem('drawing'));

        lc.on('drawingChange', function() {
          localStorage.setItem('drawing', lc.getSnapshotJSON());
        });

        $("#open-image").click(function() {
          window.open(lc.getImage({
            // rect: {x: 0, y: 0, width: 100, height: 100}
            scale: 2
          }).toDataURL());
        });

        /* demo of inserting a shape below another
        var newShape = LC.JSONToShape({"className":"Rectangle","data":{"x":238,"y":168,"width":122,"height":112,"strokeWidth":5,"strokeColor":"hsl(0, 100%, 42%)","fillColor":"#0f0"},"id":"4764db7c-9d6d-1e7f-f304-3904fa464e6b"})
        lc.saveShape(newShape, false, "e97d582e-6c88-f01e-6ba0-6a9344b5594c")
        */
      });

    </script>

    <!--
    <script type="text/javascript">
      $(document).ready(function(){
        $('.literally.two').literallycanvas({
          imageURLPrefix: '/lib/img',
          onInit: function(lc) {
            console.log('initialized with', lc)
          }
        });
      });
    </script>
    -->

    <script src="//localhost:35728/livereload.js"></script>
  </body>
</html>
